<div class="form-group">
  <div class="col-lg-offset-4 col-lg-2">
    <button type="button" class="btn btn-info" ng-click="enterShareEndpointMode()"
            ng-disabled="teststep.endpoint.environment || savingStatus.changeUnsaved">Share Endpoint</button>
  </div>
  <div class="col-lg-2">
    <button type="button" class="btn btn-info"
            ng-click="selectManagedEndpoint()">Select Managed Endpoint</button>
  </div>
</div>
<div class="form-group required" ng-if="teststep.endpoint.environment">
  <label for="endpointEnvironment" class="col-lg-2 control-label">Environment</label>
  <div class="col-lg-10">
    <select ng-if="isInShareEndpointMode()" name="endpointEnvironment" id="endpointEnvironment"
            class="form-control" ng-model="teststep.endpoint.environment"
            ng-options="item.name for item in environments"></select>
    <input ng-if="!isInShareEndpointMode()" name="endpointEnvironmentName"
           type="text" class="form-control" ng-model="teststep.endpoint.environment.name"
           id="endpointEnvironmentName" maxlength="200" readonly>
  </div>
</div>
<div class="form-group required" ng-if="teststep.endpoint.environment"
     ng-class="{ 'has-error' : savingStatus.submitted && teststepForm.endpointName.$invalid }">
  <label for="endpointName" class="col-lg-2 control-label">Name</label>
  <div class="col-lg-10">
    <input name="endpointName" type="text" class="form-control" ng-model="teststep.endpoint.name"
           id="endpointName" maxlength="200" required
           ng-readonly="!isInShareEndpointMode()">
    <div ng-show="savingStatus.submitted && teststepForm.endpointName.$invalid" class="help-block">
      <p ng-show="teststepForm.endpointName.$error.required">Name is required</p>
    </div>
  </div>
</div>
<div class="form-group" ng-if="teststep.endpoint.environment">
  <label for="endpointDescription" class="col-lg-2 control-label">Description</label>
  <div class="col-lg-10">
      <textarea name="endpointDescription" ng-model="teststep.endpoint.description"
                ng-change="isInShareEndpointMode() ? angular.noop() : autoSave(teststepForm.$valid)"
                id="endpointDescription" rows="5" class="form-control"
                ng-readonly="!isInShareEndpointMode()"></textarea>
  </div>
</div>